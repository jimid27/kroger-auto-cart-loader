name: kroger-auto-cart-loader
prefect-version: 3.4.13

pull:
  - prefect.deployments.steps.git_clone:
      repository: jimid27/kroger-auto-cart-loader
      branch: main
deployments:
  - name: kroger-auto-cart-loader
    description: Automatically update the cart with the items defined in the parameters.
    flow_name: kroger-add-to-cart-flow
    schedules:
      - cron: "0 8 * * 0"
        timezone: "America/Chicago"
        active: true
    parameters:
      items:
        - upc: "0001111041700" # Kroger 2% milk
          quantity: 1
          name: kroger 2% milk
        - upc: "0065708206040" # Kroger sourdough loaf
          quantity: 1
          name: kroger sourdough loaf
        - upc: "0007835555000" # Greek God's Plain Greek Yogurt
          quantity: 1
          name: greek gods plain greek yogurt
        - upc: "0000000004011" # Bananas
          quantity: 1
          name: bananas
    entrypoint: "flow.py:kroger_add_to_cart_flow"
    work_pool: 
      name: managed-pool
      job_variables:
        env:
          EXTRA_PIP_PACKAGES: cryptography requests
